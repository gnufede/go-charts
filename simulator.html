<!DOCTYPE html>
<html class="no-js" lang="es">
  <head>
    <title>Panel</title>
    <meta charset="utf-8" />
    <link href="/css/fakerstyle.css" rel="stylesheet" />
  </head>

  <body>
    <ul>
      <li class="ticket">
        <a href="#" class="one" data-ticketid="1" data-channel="1" data-price="2000">
          <span class="push">Entrada general
            <span class="price">20,00 €</span>
          </span>
        </a>
      </li>
      <li class="ticket">
        <a href="#" class="two" data-ticketid="2" data-channel="3" data-price="1000">
          <span class="push">Entrada infantil
            <span class="price">10,00 €</span>
          </span>
        </a>
      </li>
      <li class="ticket">
        <a href="#" class="three" data-ticketid="3" data-channel="2" data-price="1500">
          <span class="push">Entrada jubilados
            <span class="price">15,00 €</span>
          </span>
        </a>
      </li>
      <li class="ticket">
        <a href="#" class="four poor" data-ticketid="4" data-channel="1" data-price="0">
          <span class="push">Entrada gratuita
            <span class="price">gratis</span>
          </span>
        </a>
      </li>
    </ul>

    <audio preload="auto">
      <source src="https://github.com/nclud/2011.beercamp.com/blob/gh-pages/audio/inception.mp3?raw=true" type="audio/mp3" />
      <source src="https://github.com/nclud/2011.beercamp.com/blob/gh-pages/audio/inception.ogg?raw=true" type="audio/ogg" />
    </audio>

    <audio preload="auto" name="audiook">
      <source src="/sounds/smb3_coin.mp3" type="audio/mp3" />
      <source src="/sounds/smb3_coin.ogg" type="audio/ogg" />
    </audio>

    <audio preload="auto" name="audiopoor">
      <source src="/sounds/smb3_power-up.mp3" type="audio/mp3" />
      <source src="/sounds/smb3_power-up.ogg" type="audio/ogg" />
    </audio>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
      document.getElementsByTagName('audio')[0].play();
      $('.ticket').each(function(){
          $(this).addClass('loaded');
      });
    });
    $(function(){
      $("a").click(function(event) {
        var ticket_id = $(event.currentTarget).attr("data-ticketid")
        var price = $(event.currentTarget).attr("data-price")
        var channel = $(event.currentTarget).attr("data-channel")

        $.post("/update_ticket", {"ticket_id": ticket_id, "price": price, "channel": channel});
        if ($(this).hasClass('poor')) {
          debugger
          document.getElementsByTagName('audio')[2].play();
        } else {
          document.getElementsByTagName('audio')[1].play();
        }
        return false;
      });
    });
  </script>
</body>
</html>
